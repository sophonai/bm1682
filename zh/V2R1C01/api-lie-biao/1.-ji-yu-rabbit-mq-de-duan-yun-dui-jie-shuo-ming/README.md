# 基于Rabbit MQ的端云对接说明

1.版本说明

| **Index** | **版本** | **更新说明**                                                 | **其他** |
| --------- | -------- | ------------------------------------------------------------ | -------- |
| 1         | 1.0.0    | 1，初始化版本                                                |          |
| 2         | 1.0.1    | 1，新增2.1 登录接口， 返回token， mq服务器配置等信息<br />2, 修改“2.2 获取人员信息的接口”的方法：由GET改成POST，以便支持一次请求获取多个用户信息<br />3, 去掉单纯的云服务器界面上的配置，改为增加登录地址填写，事件上传和状态上传沿用之前SE3 AI 迷你机已有接口<br />4, 请求云平台获取信息的接口携带token验证和dev_sno授权 |          |
| 3         | 1.0.2    | 1、去掉MQ用户组管理相关调用，在下发用户时候默认创建比对组，且下发用户信息去掉必选字段group_name，且添加用户得mq方法改为add_users_plus |          |
| 4         | 1.0.3    | 1 完善系统架构设计框架图；<br />2 完善了接口流程说明         |          |
| 5         | 1.0.4    | 1、增加了下发人员返回执行结果的接口返回                      |          |
| 6         | 1.0.5    | 1、定义 3.3 mq命令执行结果返回形式，返回地址再每个mq命令中添加。<br />2、每个mq命令增加notify_path, 该地址用来返回每个mq命令需要返回结果的地址。 |          |
| 7         | 1.0.6    | 1、云服务器地址配置，cloud_server_address <br />2、下发人员基础信息可兼容直接在mq中下发 <br />3、下发得人员图片路径可以是绝对和相对路径 <br />4、历史考勤记录里上传得内容增加grab_fiqa_info（臻识抓拍机有添加），以及AI BOX盒子进行得人脸图片检测信息box_fiqa_info <br />5、针对可能会通过上传的陌生人图片进行重新入库，下发人员信息里增加字段register_type来判断是否是陌生人入库 |          |
| 8         | 1.0.7    | 1、增加mq下发的时候，可以选填messageKey， 用来作为消息的id标识，该字段允许缺失， 并在通过mq消息队列返回结果的方式中，增加messageKey和dev_sno字段 <br />2、增加FIQA图片质量检测MQ命令 <br /><br />3、登录接口增加uploadQueue, vHost, uploadVHost, unNeedbindExchange, imgServerAddress等字段 |          |
| 9         | 1.0.8    | 1、通行记录中增加字段dev_sno， 即SE3 AI迷你机唯一授权标识码 <br />2、fiqa返回得数据格式变更，结果result字段内容和http请求得fiqa返回结果一致 3、添加登录时候附带SE3 AI迷你机的mac地址，告知管理平台dev_sno已被哪台SE3 AI迷你机占用 |          |